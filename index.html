<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ginvest Customer Service Chat</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Konfigurasi Font Inter -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light background for a modern feel */
        }
        /* Custom scrollbar style */
        #messages-container::-webkit-scrollbar {
            width: 6px;
        }
        #messages-container::-webkit-scrollbar-thumb {
            background-color: #94a3b8; /* slate-400 */
            border-radius: 3px;
        }
        #messages-container::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
        }
        /* Style untuk gelembung pesan Anda */
        .my-message {
            border-radius: 12px 12px 0 12px;
            /* ml-auto digunakan di JS untuk alignment ke kanan */
        }
        /* Style untuk gelembung pesan orang lain */
        .other-message {
            border-radius: 12px 12px 12px 0;
            /* mr-auto atau default alignment digunakan di JS */
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Kontainer Utama Aplikasi -->
    <div id="app-container" class="w-full max-w-md bg-white shadow-2xl rounded-2xl overflow-hidden">
        
        <!-- Header Aplikasi -->
        <header class="bg-gradient-to-r from-sky-600 to-blue-600 text-white p-4 flex justify-between items-center rounded-t-2xl shadow-lg">
            <!-- Font Title diubah dari text-xl menjadi text-lg -->
            <h1 class="text-lg font-bold">Pusat Bantuan Interaktif Ginvest</h1>
            <!-- Container untuk Status dan Logout Button -->
            <div class="flex items-center space-x-3">
                <!-- Font Role diubah dari text-sm menjadi text-xs -->
                <span id="user-role" class="text-xs font-semibold bg-white text-sky-600 px-3 py-1 rounded-full shadow-md transition duration-300">Memuat...</span>
                <!-- Font Logout Button diubah dari text-sm menjadi text-xs -->
                <button id="logout-btn" class="text-xs font-semibold bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-full shadow-md transition duration-300 hidden">
                    Logout
                </button>
            </div>
        </header>

        <!-- Tampilan Login -->
        <div id="login-screen" class="p-8 text-center">
            <p class="text-gray-600 mb-6">Silakan masukkan identitas email Anda untuk memulai percakapan. </p>
            <div class="space-y-4">
                <input type="email" id="email-input" placeholder="Masukkan Email Anda (cth: user@mail.com)"
                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-4 focus:ring-sky-200 focus:border-sky-500 transition duration-200 shadow-sm"
                       required>
                <button id="start-chat-btn"
                        class="w-full bg-sky-500 hover:bg-sky-600 text-white font-semibold py-3 rounded-xl shadow-lg transition duration-300 ease-in-out transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-sky-500 focus:ring-opacity-50">
                    Mulai Chat
                </button>
            </div>
            <p id="auth-status" class="mt-4 text-sm text-red-500 hidden font-medium">Autentikasi gagal. Coba lagi.</p>
        </div>

        <!-- Tampilan Chat -->
        <div id="chat-screen" class="hidden flex flex-col h-[500px]">
            <!-- Area Pesan (Padding horizontal dikurangi dari px-3 menjadi px-2) -->
            <div id="messages-container" class="flex-grow px-2 py-4 overflow-y-auto space-y-4 bg-gray-50">
                <!-- Pesan akan dimuat di sini -->
            </div>
            
            <!-- Area Input Pesan -->
            <div class="p-4 border-t border-gray-200 bg-white">
                <div class="flex space-x-3">
                    <input type="text" id="message-input" placeholder="Ketik pesan Anda..."
                           class="flex-grow px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-sky-500 focus:border-sky-500 shadow-inner"
                           maxlength="200">
                    <!-- Tombol Kirim Diubah dari Ikon menjadi Teks -->
                    <button id="send-button"
                            class="flex-shrink-0 bg-sky-500 hover:bg-sky-600 text-white font-semibold px-6 py-3 rounded-xl shadow-md transition duration-300 ease-in-out transform hover:scale-[1.05] focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-50">
                            Kirim
                    </button>
                </div>
            </div>
        </div>

    </div>

    <!-- Memuat Firebase SDK (menggunakan versi yang direkomendasikan) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        // Tambahkan 'signOut' untuk fungsi logout
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // Import deleteDoc dan getDocs untuk operasi penghapusan koleksi
        import { getFirestore, doc, addDoc, onSnapshot, collection, query, serverTimestamp, setLogLevel, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Variabel global wajib dari Canvas
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-ginvest-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Konfigurasi Firebase yang disediakan oleh pengguna
        const userProvidedConfig = {
            apiKey: "AIzaSyA_FynN_E6zxOEHo3k2t-olypo2Tu_D-zQ",
            authDomain: "webchatapp90.firebaseapp.com",
            databaseURL: "https://webchatapp90-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "webchatapp90",
            storageBucket: "webchatapp90.firebasestorage.app",
            messagingSenderId: "199231928341",
            appId: "1:199231928341:web:ce5125077d90bf8c06361c"
        };
        
        // Menggunakan konfigurasi global jika ada, atau konfigurasi fallback
        const firebaseConfig = typeof __firebase_config !== 'undefined'
            ? JSON.parse(__firebase_config)
            : userProvidedConfig;

        // Inisialisasi Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        
        // Atur tingkat log (wajib untuk aplikasi Firestore)
        setLogLevel('debug');

        // Path koleksi chat publik (menggunakan struktur wajib /artifacts/{appId}/public/data/{collection})
        const CHAT_COLLECTION_PATH = `artifacts/${appId}/public/data/ginvest_chats`;
        const ADMIN_EMAIL = 'admin9090@gmail.com';
        
        // Konstanta untuk batas waktu inaktivitas (10 menit)
        const INACTIVITY_LIMIT_MS = 10 * 60 * 1000; 

        // State lokal aplikasi
        let currentUserId = null;
        let currentUserEmail = null;
        let isAdmin = false;
        let lastActivityTimestamp = Date.now(); // State untuk melacak waktu aktivitas terakhir
        let inactivityCheckInterval = null; // State untuk menyimpan ID interval

        // Elemen DOM
        const loginScreen = document.getElementById('login-screen');
        const chatScreen = document.getElementById('chat-screen');
        const emailInput = document.getElementById('email-input');
        const startChatBtn = document.getElementById('start-chat-btn');
        const messagesContainer = document.getElementById('messages-container');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const userRoleSpan = document.getElementById('user-role');
        const authStatus = document.getElementById('auth-status');
        const logoutBtn = document.getElementById('logout-btn'); // Ambil tombol logout

        /**
         * Mengkonversi timestamp menjadi format waktu yang mudah dibaca.
         * @param {Object} timestamp - Objek Firestore Timestamp.
         * @returns {string} Waktu yang diformat.
         */
        function formatTimestamp(timestamp) {
            if (!timestamp || !timestamp.toDate) return 'Mengirim...';
            const date = timestamp.toDate();
            return date.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
        }

        /**
         * Sanitasi input teks untuk mencegah XSS.
         * @param {string} str - String yang akan disanitasi.
         * @returns {string} String yang disanitasi.
         */
        function escapeHtml(str) {
            return str.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\"/g, "&quot;").replace(/'/g, "&#039;");
        }

        /**
         * Mengirim pesan sambutan (Admin Chat) ke Firestore saat Admin login.
         */
        async function sendAdminWelcome(adminId, adminEmail) {
            const welcomeText = "Selamat datang! Saya Admin CS Ginvest. Silakan sampaikan pertanyaan atau masalah Anda, saya siap membantu.";
            try {
                await addDoc(collection(db, CHAT_COLLECTION_PATH), {
                    senderId: adminId, 
                    senderEmail: adminEmail,
                    text: welcomeText,
                    isAdmin: true, // Admin role
                    isSystem: false, // Renders as a standard Admin message bubble
                    timestamp: serverTimestamp()
                });
            } catch (error) { 
                console.error("Gagal mengirim pesan sambutan Admin: ", error); 
            }
        }

        /**
         * Mengirim pesan sibuk (Sistem) ke Firestore saat Pengguna biasa login.
         */
        async function sendBusyMessage(userEmail) {
            const busyText = `Halo ${userEmail}! Admin CS sedang melayani pelanggan lain. Mohon tunggu sebentar atau tinggalkan pesan, kami akan merespon secepatnya.`;
            try {
                await addDoc(collection(db, CHAT_COLLECTION_PATH), {
                    senderId: 'SYSTEM', // Unique ID for system messages
                    senderEmail: 'SYSTEM',
                    text: busyText,
                    isAdmin: false,
                    isSystem: true, // Renders as the yellow system box
                    timestamp: serverTimestamp()
                });
            } catch (error) { 
                console.error("Gagal mengirim pesan sibuk: ", error); 
            }
        }
        
        /**
         * Merender pesan ke dalam container.
         * @param {Array<Object>} messages - Array objek pesan.
         */
        function renderMessages(messages) {
            messagesContainer.innerHTML = '';
            messages.forEach(msg => {
                const isMyMessage = msg.senderId === currentUserId;
                const isSenderAdmin = msg.isAdmin;
                const isSystemMessage = msg.isSystem; // Cek untuk pesan sistem
                
                let messageElement;

                // --- Pesan Sistem ---
                if (isSystemMessage) {
                    const wrapperClasses = 'flex justify-center w-full my-2';
                    // Menggunakan text-sm untuk pesan sistem agar konsisten
                    const bubbleAlignmentClasses = 'max-w-[90%] px-4 py-2 text-center text-sm font-medium bg-yellow-100 text-yellow-800 rounded-lg shadow-sm';
                    
                    messageElement = `
                        <div class="${wrapperClasses}">
                            <span class="${bubbleAlignmentClasses}">
                                ${escapeHtml(msg.text)}
                            </span>
                        </div>
                    `;
                } else {
                    // --- Pesan Biasa (Pengguna atau Admin) ---
                    let bubbleClasses;
                    let wrapperClasses = 'flex flex-col w-full '; 
                    let bubbleAlignmentClasses = 'max-w-[80%] px-4 py-2 shadow-md ';
                    let senderName;
                    
                    if (isMyMessage) {
                        bubbleClasses = 'bg-blue-600 text-white my-message';
                        senderName = 'Anda';
                        wrapperClasses += ' items-end'; 
                        bubbleAlignmentClasses += ' ml-auto'; 
                    } else if (isSenderAdmin) {
                        // Pesan yang datang dari Admin
                        bubbleClasses = 'bg-red-50 text-gray-800 border-l-4 border-red-500 other-message';
                        senderName = 'Admin'; // Diubah dari 'Admin CS'
                        wrapperClasses += ' items-start';
                    } else {
                        // Pesan yang datang dari Pengguna lain
                        bubbleClasses = 'bg-gray-100 text-gray-800 other-message';
                        senderName = msg.senderEmail;
                        wrapperClasses += ' items-start';
                    }
                    
                    const adminTag = (isSenderAdmin && !isMyMessage) 
                        ? '<span class="text-xs font-bold text-red-600 mr-2">ADMIN</span>' 
                        : '';
                    
                    const timeColor = isMyMessage ? 'text-blue-200' : 'text-gray-500';

                    messageElement = `
                        <div class="${wrapperClasses}">
                            <!-- Font untuk nama pengirim ini tetap text-xs agar tidak terlalu besar di atas gelembung pesan -->
                            <span class="text-xs ${isMyMessage ? 'text-gray-600' : 'text-gray-500'} mb-1 font-medium">${senderName}</span>
                            <div class="${bubbleAlignmentClasses} ${bubbleClasses}"> 
                                <div class="flex items-start">
                                    ${adminTag}
                                    <!-- Font Size Dikecilkan menjadi text-sm -->
                                    <p class="whitespace-pre-wrap text-sm">${escapeHtml(msg.text)}</p>
                                </div>
                                <span class="block mt-1 text-[10px] ${timeColor} text-right">
                                    ${formatTimestamp(msg.timestamp)}
                                </span>
                            </div>
                        </div>
                    `;
                }
                
                messagesContainer.insertAdjacentHTML('beforeend', messageElement);
            });
            // Gulir ke bawah
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        /**
         * Mengirim pesan ke Firestore.
         */
        async function sendMessage() {
            const text = messageInput.value.trim();
            if (text === "") return;

            try {
                const messageData = {
                    senderId: currentUserId,
                    senderEmail: currentUserEmail,
                    text: text,
                    isAdmin: isAdmin,
                    timestamp: serverTimestamp()
                };

                await addDoc(collection(db, CHAT_COLLECTION_PATH), messageData);
                
                messageInput.value = '';
                messageInput.focus();
                
            } catch (error) {
                console.error("Gagal mengirim pesan: ", error);
                // Menampilkan pesan error kepada user (bukan alert)
                console.error("Gagal mengirim pesan. Silakan cek koneksi atau coba lagi.");
            }
        }
        
        /**
         * Menghapus seluruh riwayat chat dari Firestore.
         */
        async function deleteChatHistory() {
            console.warn("Batas inaktivitas tercapai (10 menit). Menghapus riwayat chat...");
            try {
                // Ambil semua dokumen
                const q = query(collection(db, CHAT_COLLECTION_PATH));
                const snapshot = await getDocs(q);
                
                // Hapus setiap dokumen satu per satu
                const deletePromises = [];
                snapshot.forEach((docEntry) => {
                    deletePromises.push(deleteDoc(doc(db, CHAT_COLLECTION_PATH, docEntry.id)));
                });

                await Promise.all(deletePromises);
                console.log(`Berhasil menghapus ${snapshot.size} pesan karena tidak aktif.`);

                // Setelah menghapus, kirim ulang pesan sistem sambutan
                if (!isAdmin && currentUserEmail) {
                    await sendBusyMessage(currentUserEmail);
                } else if (isAdmin && currentUserEmail) {
                    await sendAdminWelcome(currentUserId, currentUserEmail);
                }

            } catch (error) {
                console.error("Gagal menghapus riwayat chat: ", error);
            }
        }

        /**
         * Memulai pemeriksaan interval untuk menghapus chat jika tidak ada aktivitas.
         */
        function startInactivityCheck() {
            // Hentikan pemeriksaan sebelumnya jika ada
            if (inactivityCheckInterval) {
                clearInterval(inactivityCheckInterval);
            }

            // Atur ulang timestamp awal saat pemeriksaan dimulai
            lastActivityTimestamp = Date.now();

            inactivityCheckInterval = setInterval(() => {
                const currentTime = Date.now();
                const timeElapsed = currentTime - lastActivityTimestamp;

                if (timeElapsed > INACTIVITY_LIMIT_MS) {
                    deleteChatHistory();
                    // lastActivityTimestamp akan direset oleh onSnapshot setelah pesan sambutan dikirim ulang.
                } 
            }, 60000); // Periksa setiap 1 menit (60000 ms)
        }

        /**
         * Mengatur listener real-time untuk pesan.
         */
        function setupMessageListener() {
            if (!currentUserId) return; // Pastikan user sudah terautentikasi
            
            const q = query(
                collection(db, CHAT_COLLECTION_PATH),
                // Data akan difetch, dan pengurutan akan dilakukan secara lokal (di memori)
            );

            // onSnapshot akan mendengarkan perubahan secara real-time
            onSnapshot(q, (snapshot) => {
                const messages = [];
                let latestTimestamp = 0; // Tambahkan variabel untuk melacak timestamp terbaru

                snapshot.forEach(doc => {
                    const data = doc.data();
                    messages.push({ id: doc.id, ...data });

                    // Lacak timestamp terbaru
                    if (data.timestamp && data.timestamp.toMillis() > latestTimestamp) {
                        latestTimestamp = data.timestamp.toMillis();
                    }
                });

                // Jika ada pesan, perbarui lastActivityTimestamp dengan yang terbaru
                if (latestTimestamp > 0) {
                    lastActivityTimestamp = latestTimestamp;
                } else {
                    // Jika tidak ada pesan (misalnya setelah penghapusan), gunakan waktu saat ini
                    lastActivityTimestamp = Date.now();
                }

                // Lakukan pengurutan lokal berdasarkan timestamp
                messages.sort((a, b) => {
                    const timeA = a.timestamp ? a.timestamp.toMillis() : Infinity;
                    const timeB = b.timestamp ? b.timestamp.toMillis() : Infinity;
                    return timeA - timeB;
                });
                
                renderMessages(messages);
            }, (error) => {
                console.error("Error fetching messages: ", error);
                userRoleSpan.textContent = "Error Chat";
            });
        }

        /**
         * Fungsi untuk melakukan logout pengguna.
         */
        async function handleLogout() {
            try {
                // 1. Hentikan pemeriksaan inaktivitas
                if (inactivityCheckInterval) {
                    clearInterval(inactivityCheckInterval);
                    inactivityCheckInterval = null;
                }

                // 2. Hapus data sesi lokal
                localStorage.removeItem('ginvest_user_email');
                currentUserId = null;
                currentUserEmail = null;
                isAdmin = false;

                // 3. Logout dari Firebase
                await signOut(auth);

                // 4. Reset UI
                chatScreen.classList.add('hidden');
                loginScreen.classList.remove('hidden');
                logoutBtn.classList.add('hidden');
                
                // Menggunakan 'Tamu' untuk status non-autentikasi di layar login
                userRoleSpan.textContent = 'Tamu';
                userRoleSpan.classList.remove('bg-red-500', 'bg-green-500', 'text-white');
                userRoleSpan.classList.add('bg-white', 'text-sky-600');
                messagesContainer.innerHTML = ''; // Kosongkan log chat
                
                console.log("Pengguna berhasil logout.");

            } catch (error) {
                console.error("Gagal saat proses logout: ", error);
            }
        }

        /**
         * Finalizes login, sets state, updates UI, and sets up listeners.
         * This is the core function for starting a user session, used by both explicit login and auto-restore.
         * @param {Object} user - Firebase User object.
         * @param {string} email - The email used for login/session.
         * @param {boolean} sendWelcome - Whether to send the welcome/busy message. Should be true only for explicit login.
         */
        function restoreSessionState(user, email, sendWelcome) {
            currentUserId = user.uid;
            currentUserEmail = email;
            isAdmin = currentUserEmail === ADMIN_EMAIL;
            
            // 1. Update UI
            loginScreen.classList.add('hidden');
            chatScreen.classList.remove('hidden');
            chatScreen.classList.add('flex');
            logoutBtn.classList.remove('hidden'); // Tampilkan tombol logout
            
            // Perubahan di sini: Mengganti 'Admin CS' menjadi 'Admin' untuk admin
            userRoleSpan.textContent = isAdmin ? 'Admin' : 'Customer';
            
            // Ubah gaya tag peran di header
            userRoleSpan.classList.remove('text-sky-600', 'bg-white', 'bg-red-500', 'bg-green-500');
            userRoleSpan.classList.add(isAdmin ? 'bg-red-500' : 'bg-green-500', 'text-white');
            
            // 2. Setup Listener Pesan & Inactivity Check
            setupMessageListener();
            startInactivityCheck(); // MULAI PEMERIKSAAN INAKTIVITAS

            // 3. Kirim pesan sambutan jika ini adalah login awal/eksplisit
            if (sendWelcome) {
                if (isAdmin) {
                    sendAdminWelcome(currentUserId, currentUserEmail);
                } else {
                    sendBusyMessage(currentUserEmail);
                }
            }
        }


        /**
         * Memulai autentikasi dan beralih ke layar chat. (Untuk login manual/eksplisit)
         * @param {string} email - "Email" yang dimasukkan pengguna.
         */
        async function loginApp(email) {
            // Validasi email dasar
            if (!email || !email.includes('@') || !email.includes('.')) {
                authStatus.textContent = 'Masukkan format email yang valid.';
                authStatus.classList.remove('hidden');
                return;
            }

            try {
                startChatBtn.disabled = true;
                startChatBtn.textContent = 'Memulai...';
                authStatus.classList.add('hidden');
                
                const tempEmail = email.trim();
                
                // 1. Autentikasi Anonim (atau menggunakan token jika ada)
                let userCredential;
                if (initialAuthToken) {
                    userCredential = await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    userCredential = await signInAnonymously(auth);
                }

                const user = userCredential.user;
                
                // 2. Simpan email di localStorage untuk persistensi saat reload.
                localStorage.setItem('ginvest_user_email', tempEmail); 
                
                // 3. Panggil fungsi restore state
                restoreSessionState(user, tempEmail, true); // true = kirim pesan sambutan
                
            } catch (error) {
                console.error("Error saat login atau autentikasi: ", error);
                authStatus.textContent = `Login Gagal. Pastikan koneksi internet Anda stabil.`;
                authStatus.classList.remove('hidden');
            } finally {
                startChatBtn.disabled = false;
                startChatBtn.textContent = 'Mulai Chat';
            }
        }


        // --- Event Listeners ---
        
        // Listener untuk tombol "Mulai Chat"
        startChatBtn.addEventListener('click', () => {
            const email = emailInput.value;
            loginApp(email);
        });

        // Listener untuk tombol ENTER pada input email
        emailInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault(); 
                const email = emailInput.value;
                loginApp(email);
            }
        });
        
        // Listener untuk tombol Logout
        logoutBtn.addEventListener('click', handleLogout);

        sendButton.addEventListener('click', sendMessage);

        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault(); 
                sendMessage();
            }
        });
        
        // Cek status autentikasi awal (untuk auto-login / persistensi)
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // Sesi Firebase dipulihkan. Coba ambil konteks aplikasi (email) dari localStorage.
                const storedEmail = localStorage.getItem('ginvest_user_email');
                
                if (storedEmail) {
                    // Auto-restore session berhasil
                    // Memanggil fungsi state restore tanpa mengirim pesan sambutan (false)
                    restoreSessionState(user, storedEmail, false); 
                    // Tidak perlu mengubah userRoleSpan di sini, sudah diatur di restoreSessionState
                } else {
                    // Sesi Firebase ada, tapi konteks (email) hilang. Tampilkan kembali login.
                    loginScreen.classList.remove('hidden');
                    chatScreen.classList.add('hidden');
                    logoutBtn.classList.add('hidden'); // Sembunyikan tombol logout
                    
                    // Status saat sesi hilang/memuat di layar login
                    userRoleSpan.textContent = 'Tamu'; 
                    userRoleSpan.classList.remove('bg-red-500', 'bg-green-500', 'text-white');
                    userRoleSpan.classList.add('bg-white', 'text-sky-600');
                }
            } else {
                // Tidak ada sesi Firebase. Tampilkan login screen.
                loginScreen.classList.remove('hidden');
                chatScreen.classList.add('hidden');
                logoutBtn.classList.add('hidden'); // Sembunyikan tombol logout
                
                // Status saat non-autentikasi di layar login
                userRoleSpan.textContent = 'Tamu';
                userRoleSpan.classList.remove('bg-red-500', 'bg-green-500', 'text-white');
                userRoleSpan.classList.add('bg-white', 'text-sky-600');
            }
        });

    </script>
</body>
</html>
